<!DOCTYPE html>
<html>
  <head>
    <!-- meta information -->
<meta charset="utf-8">
<meta name="description" 
      content="最近互联网上爆发了加密病毒，实验室的服务器疑似被入侵了。最终定下来只使用一台32服务器连外网作为出口，另外两台通过32登录，且关闭ssh密码登录，转而使用ssh-keygen密钥实现自动登录。写篇短文以记录配置过程。1.首先在本地端生..." >
<meta name="author" content="Haozhe Ji">

<!-- Enable responsiveness on mobile devices-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<!-- title -->
<title>ssh-keygen实现密钥登录远程服务器 &middot; </title>

<!-- icons -->
<link rel="shortcut icon" href="/public/images/favicon.ico" />

<!-- stylesheets -->
<link rel="stylesheet" href="/public/css/responsive.gs.12col.css">
<link rel="stylesheet" href="/public/css/animate.min.css">
<link rel="stylesheet" href="/public/css/main.css">

<!-- Google fonts -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic&subset=latin-ext">



<!-- feed links -->
<link rel="alternate" href="http://localhost:4000/feed.xml" type="application/rss+xml" title="">

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
          }
        });
      
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
          }
        });
    </script>      
    <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  </head>
  <body>
    <div class="container azul">
      <header class="top row gutters">
        <div class="col span_2 center">
          <!-- TODO: add baseurl to the logo link -->
          <a href="http://localhost:4000" id="logo" title="Thoughts of JHz"
             style="background-image: url(/public/images/logo.png);"></a>
        </div>
        <nav class="col span_10 top-navbar">
  
  <a href="/" title="Home"
     >Home</a>
  
  <a href="/about" title="About"
     >About</a>
  
  <a href="/info" title="Information"
     >Information</a>
  
</nav>

      </header>

      <article class="single row gutters">
  <time class="published" datetime="2017-05-29">29 May 2017</time>
  <h2>ssh-keygen实现密钥登录远程服务器</h2>

  <p>最近互联网上爆发了加密病毒，实验室的服务器疑似被入侵了。
最终定下来只使用一台32服务器连外网作为出口，另外两台通过32登录，且关闭ssh密码登录，转而使用ssh-keygen密钥实现自动登录。写篇短文以记录配置过程。
<!--more--></p>
<h2 id="1首先在本地端生成rsa密钥和公钥">1.首先在本地端生成RSA密钥和公钥</h2>
<div class="highlighter-rouge"><pre class="highlight"><code>ssh-keygen -t rsa
</code></pre>
</div>

<p>然后一路回车就可以了。（中间有设置密码提示，用来加密密钥）
会生成<code class="highlighter-rouge">id_rsa</code>和<code class="highlighter-rouge">is_rsa.pub</code>两个文件，前者密钥保留在本地，公钥分配到需要登录的服务器上。</p>
<h2 id="2将ssh公钥上传到服务器">2.将SSH公钥上传到服务器</h2>
<p>只需要一条命令就行</p>
<div class="highlighter-rouge"><pre class="highlight"><code>ssh-copy-id username@remote-server
</code></pre>
</div>
<p>中间输入一次远程登录密码，SSH公钥就会自动上传了。公钥保存在<code class="highlighter-rouge">/home/username/.ssh/authorized_keys</code>文件中。之后使用ssh登录或者scp传输文件都不需要登录了。</p>


</article>

<div class="PageNavigation">
  
    <a class="prev" href="/toss-coin-problem">&laquo; 抛硬币先后手对胜率的影响</a>
  
  
    <a class="next" href="/two-dimension-random-walk" align="left">二维格点随机游走问题 &raquo;</a>
  
</div>


      <footer>
        <p>
            &copy; 2017 <a href="https://www.github.com/cdjhz">Haozhe Ji</a>
            <br>
            Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="https://github.com/aigarsdz/brume">Brume theme</a>.
        </p>
      </footer>
    </div>

    <!-- scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/public/js/jquery.fitvids.js"></script>
    <script>
      $(document).ready(function(){
        $("article").fitVids();
      });
    </script>
  </body>
</html>
